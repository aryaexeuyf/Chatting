<!DOCTYPE html>
<html>
<head>
    <title>Test Firebase Chat</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
        }
        #status {
            padding: 20px;
            border-radius: 10px;
            font-size: 18px;
            margin: 20px 0;
            text-align: center;
        }
        .success { background: #4CAF50; color: white; }
        .error { background: #f44336; color: white; }
        .loading { background: #FF9800; color: white; }
    </style>
</head>
<body>
    <h1>üî• Test Firebase Chat</h1>
    <div id="status" class="loading">Testing connection to Firebase...</div>

    <!-- SCRIPT COMPAT VERSION (BUKAN MODULE) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
    
    <script>
        // üî• CONFIG DARI FIREBASE (YANG KAMU KASIH)
        const firebaseConfig = {
            apiKey: "AIzaSyAoGP-zYeg4u-3Nq2bVb1Hjeeauh98uDTg",
            authDomain: "chat-wa-global.firebaseapp.com",
            databaseURL: "https://chat-wa-global-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "chat-wa-global",
            storageBucket: "chat-wa-global.firebasestorage.app",
            messagingSenderId: "939328390157",
            appId: "1:939328390157:web:9d5435fc394240593f8144"
        };

        console.log("üî• Starting Firebase test...");
        
        try {
            // Initialize Firebase (COMPAT VERSION)
            const app = firebase.initializeApp(firebaseConfig);
            const database = firebase.database();
            
            console.log("‚úÖ Firebase initialized");
            
            const status = document.getElementById('status');

            // Check connection status
            const connectedRef = database.ref(".info/connected");
            connectedRef.on("value", function(snap) {
                if (snap.val() === true) {
                    console.log("üéâ Connected to Firebase!");
                    status.textContent = "üéâ BERHASIL TERHUBUNG KE FIREBASE!";
                    status.className = "success";
                    
                    // Test write to database
                    database.ref('connectionTest').set({
                        message: 'Halo! Firebase connection berhasil!',
                        timestamp: new Date().toISOString(),
                        userAgent: navigator.userAgent
                    }).then(() => {
                        console.log("‚úÖ Data written successfully");
                        status.textContent += " ‚úÖ Data berhasil dikirim!";
                    }).catch(error => {
                        console.error("‚ùå Write error:", error);
                    });
                    
                } else {
                    console.log("‚ùå Not connected to Firebase");
                    status.textContent = "‚ùå GAGAL TERHUBUNG KE FIREBASE";
                    status.className = "error";
                }
            });

        } catch (error) {
            console.error("‚ùå Initialization error:", error);
            document.getElementById('status').textContent = "‚ùå Error: " + error.message;
            document.getElementById('status').className = "error";
        }
    </script>
</body>
</html>
